<!doctype html>

<script src="../sharp.js"></script>

<script id="tpl" type="text/x-stpl">
  #!json([{a: 1}]);

  <div>#(a)</div>

  <pre>
    #(Date());
    #(Date.now());
  </pre>

  #def ("loop") {
    <p style="color: blue;">#(key): #(value);</p>
  }#

  #def ("test") {
    #(123)
    #(a);

    #def ('deep') {
      <i>deep</i>
    }#

    #use('deep')
  }#


  #asdas asda# {ad}    aaa

  &lt; a &#62;

  #each (test -> key, value) {
    #use("loop")
    #use("test")
  }#

  #use("test");

  <br><b>#if (Math.round(Math.random())) {
    blah
  } #elseif (Math.round(Math.random())) {
    other
  } #else {
    nothing
  }#</b>
</script>

<div id="out"></div>

<script>
  var tpl = document.getElementById('tpl');

  tpl = tpl.innerHTML;
  tpl = sharp.compiler.compile(tpl);

  tpl = sharp.runtime.render(tpl, {
    test: {
      a: 1,
      b: 3,
      c: 10
    },
    a: 'ggg'
  });

  document.getElementById('out').innerHTML = tpl;
</script>